[Unit]
Description=Octopus result service
After=network.target
StartLimitIntervalSec=0

[Service]
Type=simple
Restart=always
RestartSec=1
User=result
AmbientCapabilities=CAP_NET_BIND_SERVICE
CapabilityBoundingSet=CAP_NET_BIND_SERVICE
WorkingDirectory=/home/result
ExecStart=/usr/bin/node server.js
Environment="POSTGRES_HOST={{ postgres_host }}"
Environment="POSTGRES_PORT={{ postgres_port }}"
Environment="POSTGRES_DB={{ postgres_db }}"
Environment="POSTGRES_USER={{ postgres_user }}"
Environment="POSTGRES_PASSWORD={{ postgres_password }}"

[Install]
WantedBy=multi-user.target
